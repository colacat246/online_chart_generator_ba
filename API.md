# 接口文档

## 注册

请求地址：`/api/register`
请求方法：post

请求参数：

| 字段       | 说明  | 类型     | 备注 | 是否必填 |
|----------|-----|--------|----|------|
| userName | 用户名 | String |    | 是    |
| password | 密码  | String |    | 是    |

返回参数：

| 字段              | 说明              | 类型     | 备注                         | 是否必填                                                                  |
|-----------------|-----------------|--------|----------------------------|-----------------------------------------------------------------------|
| statusCode      | 接口状态码           | Number | 成功：999；空参数：1000； 验证失败：1001 | 是                                                                     |
| message         | 接口信息            | String | 成功：'success' 失败：提示信息       | 是                                                                     |
| userVo          | 用户数据，包括用户id和用户名 | Object | 是                          |                                                                       |
| user-auth-token | JWT Token       | String | 是                          | 有用户ID userId: Number、用户名 userName: String、过期时间 exp: Number，cookie形式获取 |

## 登录

请求地址：`/api/login`
请求方法：post

请求参数：

| 字段       | 说明  | 类型     | 备注 | 是否必填 |
|----------|-----|--------|----|------|
| userName | 用户名 | String |    | 是    |
| password | 密码  | String |    | 是    |

返回参数：

| 字段              | 说明              | 类型     | 备注                         | 是否必填                                                                  |
|-----------------|-----------------|--------|----------------------------|-----------------------------------------------------------------------|
| statusCode      | 接口状态码           | Number | 成功：999；空参数：1000； 验证失败：1001 | 是                                                                     |
| message         | 接口信息            | String | 成功：'success' 失败：提示信息       | 是                                                                     |
| userVo          | 用户数据，包括用户id和用户名 | Object | 是                          |                                                                       |
| user-auth-token | JWT Token       | String | 是                          | 有用户ID userId: Number、用户名 userName: String、过期时间 exp: Number，cookie形式获取 |

## 修改密码

请求地址：`/api/changePw`
请求方法：post

请求参数：

| 字段          | 说明  | 类型     | 备注 | 是否必填 |
|-------------|-----|--------|----|------|
| userName    | 用户名 | String |    | 是    |
| oriPassword | 密码  | String |    | 是    |
| newPassword | 密码  | String |    | 是    |

返回参数：

| 字段                       | 说明              | 类型     | 备注                         | 是否必填                                                                  |
|--------------------------|-----------------|--------|----------------------------|-----------------------------------------------------------------------|
| statusCode               | 接口状态码           | Number | 成功：999；空参数：1000； 验证失败：1001 | 是                                                                     |
| message                  | 接口信息            | String | 成功：'success' 失败：提示信息       | 是                                                                     |
| userVo                   | 用户数据，包括用户id和用户名 | Object | 是                          |                                                                       |
| user-auth-token (header) | JWT Token       | String | 是                          | 有用户ID userId: Number、用户名 userName: String、过期时间 exp: Number，cookie形式获取 |


## 请求侧边栏

请求地址：`/api/userGraphList`
请求方法：get

请求Cookie：

| 字段              | 说明        | 类型     | 备注                        | 是否必填 |
|-----------------|-----------|--------|---------------------------|------|
| user-auth-token | 用户验证Jwt数据 | String | header中x-www-auth-token携带 | 是    |

请求参数：无

返回参数：

| 字段         | 说明    | 类型              | 备注                          | 是否必填 |
|------------|-------|-----------------|-----------------------------|------|
| statusCode | 接口状态码 | Number          | 成功：999；失败：{1000, 1001, 1002 | 是    |
| message    | 接口信息  | String          | 成功：'OK' 失败：提示信息             | 是    |
| asideList  | 数据    | list<asideItem> |                             | 是    |

asideItem:

| 字段             | 说明    | 类型     | 备注                      | 是否必填 |
|----------------|-------|--------|-------------------------|------|
| createdGraphId | 序号    | Number |                         | 是    |
| graphName      | 图形名称  | String |                         | 是    |
| createdTime    | 创建时间  | String | yyyy-MM-dd HH:mm:ss:SSS | 是    |
| graphTypeId    | 图形的种类 | Number |                         | 是    |

## 请求图数据

请求地址：`/api/userGraph/{createdGraphId}`
请求方法：get

请求参数：

| 字段             | 说明  | 类型     | 备注 | 是否必填 |
|----------------|-----|--------|----|------|
| createdGraphId | 图id | Number |    | 是    |

返回参数：

| 字段         | 说明    | 类型     | 备注                   | 是否必填 |
|------------|-------|--------|----------------------|------|
| statusCode | 接口状态码 | Number | 成功：200；失败：404        | 是    |
| message    | 接口信息  | String | 成功：'success' 失败：提示信息 | 是    |
| data       | 图数据   | json   |                      |      |

## 新建图形

请求地址：`/api/userGraph/`
请求方法：post

请求参数：

| 字段          | 说明     | 类型     | 备注 | 是否必填 |
|-------------|--------|--------|----|------|
| graphTypeId | 图类型的id | Number |    | 是    |
| graphName   | 图名称    | String |    | 是    |

返回参数：

| 字段         | 说明    | 类型     | 备注                   | 是否必填 |
|------------|-------|--------|----------------------|------|
| statusCode | 接口状态码 | Number | 成功：200；失败：404        | 是    |
| message    | 接口信息  | String | 成功：'success' 失败：提示信息 | 是    |
| data       | 数据    | json   |                      |      |

data字段：

| 字段         | 说明      | 类型      | 备注 | 是否必填 |
|------------|---------|---------|----|------|
| graphList  | 更新后的图列表 | Array   |    | 是    |
| newGraphId | 新图形的Id  | Integer |    |      |

## 新建series

请求地址：`/api/userGraphSeries/`
请求方法：post

请求参数：

| 字段             | 说明       | 类型     | 备注 | 是否必填 |
|----------------|----------|--------|----|------|
| createdGraphId | 曲线所属图的id | Number |    | 是    |
| seriesName     | 曲线名称     | String |    | 是    |

返回参数：

| 字段         | 说明    | 类型     | 备注                   | 是否必填 |
|------------|-------|--------|----------------------|------|
| statusCode | 接口状态码 | Number | 成功：200；失败：404        | 是    |
| message    | 接口信息  | String | 成功：'success' 失败：提示信息 | 是    |
| data       | 新数据   | json   |                      |      |

data字段：

| 字段          | 说明      | 类型     | 备注 | 是否必填 |
|-------------|---------|--------|----|------|
| graph       | 更新后的图数据 | json   |    | 是    |
| newSeriesId | 新曲线的Id  | String |    |      |

## 删除图形

请求地址：`/api/userGraph/`
请求方法：delete

请求参数：

| 字段             | 说明     | 类型     | 备注 | 是否必填 |
|----------------|--------|--------|----|------|
| createdGraphId | 图类型的id | Number |    | 是    |

返回参数：

| 字段         | 说明    | 类型     | 备注                   | 是否必填 |
|------------|-------|--------|----------------------|------|
| statusCode | 接口状态码 | Number | 成功：200；失败：404        | 是    |
| message    | 接口信息  | String | 成功：'success' 失败：提示信息 | 是    |
| data       | 数据    | json   | 返回graphList          |      |

data字段：

| 字段         | 说明           | 类型      | 备注           | 是否必填 |
|------------|--------------|---------|--------------|------|
| graphList  | 更新后的图列表      | json    |              | 是    |
| curGraphId | 更新后所跳转到的图形ID | Integer | 图列表为空时返回null |      |

## 更新图形

请求地址：`/api/userGraph/`
请求方法：put

请求参数：

| 字段             | 说明      | 类型     | 备注 | 是否必填 |
|----------------|---------|--------|----|------|
| createdGraphId | 图类型的id  | Number |    | 是    |
| data           | 更新的图形数据 | Json   |    | 是    |

返回参数：

| 字段                       | 说明    | 类型                         | 备注                   | 是否必填 |
|--------------------------|-------|----------------------------|----------------------|------|
| statusCode               | 接口状态码 | Number                     | 成功：200；失败：404        | 是    |
| message                  | 接口信息  | String                     | 成功：'success' 失败：提示信息 | 是    |
| data **FIXME 没必要有这个字段了** | 数据    | json ({"isUpdated": true}) | 是否更新                 |      |

## 更新图形名称

请求地址：`/api/userGraphName/`
请求方法：put

请求参数：

| 字段             | 说明     | 类型     | 备注 | 是否必填 |
|----------------|--------|--------|----|------|
| createdGraphId | 图类型的id | Number |    | 是    |
| graphName      | 新的图形名称 | String |    | 是    |

返回参数：

| 字段         | 说明    | 类型      | 备注                   | 是否必填 |
|------------|-------|---------|----------------------|------|
| statusCode | 接口状态码 | Number  | 成功：200；失败：404        | 是    |
| message    | 接口信息  | String  | 成功：'success' 失败：提示信息 | 是    |
| data       | 数据    | boolean | 是否更新                 |      |

## 删除曲线

请求地址：`/api/userGraphSeries/`
请求方法：delete

请求参数：

| 字段             | 说明     | 类型     | 备注 | 是否必填 |
|----------------|--------|--------|----|------|
| createdGraphId | 图类型的id | Number |    | 是    |
| seriesId       | 图类型的id | Number |    | 是    |

返回参数：

| 字段         | 说明    | 类型     | 备注                   | 是否必填 |
|------------|-------|--------|----------------------|------|
| statusCode | 接口状态码 | Number | 成功：200；失败：404        | 是    |
| message    | 接口信息  | String | 成功：'success' 失败：提示信息 | 是    |
| data       | 数据    | json   |                      |      |

data字段：

data字段：

| 字段       | 说明            | 类型     | 备注         | 是否必填 |
|----------|---------------|--------|------------|------|
| graph    | 更新后的图数据       | json   |            | 是    |
| seriesId | 所删除曲线前一条曲线的Id | String | 没有前一条曲线返回空 |      |

## template

请求地址：`/api/path`
请求方法：get

请求参数：

| 字段     | 说明 | 类型 | 备注 | 是否必填 |
|--------|----|----|----|------|
| field1 |    |    |    |      |
| field2 |    |    |    |      |

返回参数：

| 字段         | 说明    | 类型     | 备注                   | 是否必填 |
|------------|-------|--------|----------------------|------|
| statusCode | 接口状态码 | Number | 成功：200；失败：404        | 是    |
| message    | 接口信息  | String | 成功：'success' 失败：提示信息 | 是    |
| data       | 数据    | json   |                      |      |
| field1     |       |        |                      |      |
| field2     |       |        |                      |      |

data:

| 字段   | 说明 | 类型     | 备注 | 是否必填 |
|------|----|--------|----|------|
| page | 页号 | Number |    | 是    |
| size | 大小 | Number |    | 是    |
